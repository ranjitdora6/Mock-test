<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCS Pattern Mock Test</title>
    <style>
        :root {
            --primary: #0047ab;
            --secondary: #ff6b00;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        /* Landscape orientation message */
        .orientation-message {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            color: white;
            z-index: 1000;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }
        
        .orientation-message i {
            font-size: 48px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) and (orientation: portrait) {
            .orientation-message {
                display: flex;
            }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), #002d72);
            color: white;
            padding: 20px 0;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            flex-wrap: wrap;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo h1 {
            font-size: 24px;
            margin-left: 10px;
        }
        
        .timer {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 18px;
            margin-top: 10px;
        }
        
        .main-content {
            display: flex;
            gap: 20px;
        }
        
        .question-panel {
            flex: 3;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 25px;
            margin-bottom: 20px;
        }
        
        .question-nav {
            flex: 1;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 20px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }
        
        .question-number {
            font-size: 14px;
            color: var(--primary);
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .question-text {
            font-size: 18px;
            margin-bottom: 25px;
            line-height: 1.5;
        }
        
        .options {
            margin-bottom: 30px;
        }
        
        .option {
            display: flex;
            align-items: flex-start;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .option:hover {
            background-color: #f8f9fa;
            border-color: #c0c0c0;
        }
        
        .option.selected {
            background-color: #e3f2fd;
            border-color: var(--primary);
        }
        
        .option.correct {
            background-color: #d4edda;
            border-color: var(--success);
        }
        
        .option.incorrect {
            background-color: #f8d7da;
            border-color: var(--danger);
        }
        
        .option input {
            margin-right: 15px;
            margin-top: 3px;
        }
        
        .option label {
            cursor: pointer;
            flex: 1;
        }
        
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 120px;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #003d82;
        }
        
        .btn-secondary {
            background-color: #e9ecef;
            color: var(--dark);
        }
        
        .btn-secondary:hover {
            background-color: #dde2e6;
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background-color: #218838;
        }
        
        .question-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        .question-btn {
            width: 100%;
            height: 40px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .question-btn:hover {
            background-color: #f0f0f0;
        }
        
        .question-btn.visited {
            background-color: #e3f2fd;
            border-color: var(--primary);
        }
        
        .question-btn.answered {
            background-color: var(--success);
            color: white;
            border-color: var(--success);
        }
        
        .question-btn.current {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .section-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary);
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 5px;
        }
        
        .legend {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            font-size: 12px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
            margin-right: 5px;
        }
        
        /* Enhanced Scorecard Styles */
        .scorecard {
            display: none;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-top: 30px;
        }
        
        .scorecard-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .scorecard-title {
            font-size: 28px;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .scorecard-subtitle {
            color: #6c757d;
            font-size: 16px;
        }
        
        .scorecard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            border-left: 4px solid var(--primary);
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 14px;
        }
        
        .accuracy-container {
            margin: 30px 0;
        }
        
        .accuracy-title {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .accuracy-bar {
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .accuracy-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), #20c997);
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .accuracy-text {
            text-align: right;
            font-weight: bold;
            color: var(--primary);
        }
        
        .scorecard-breakdown {
            margin-top: 30px;
        }
        
        .breakdown-title {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .breakdown-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .breakdown-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-radius: 6px;
            background: #f8f9fa;
        }
        
        .breakdown-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .breakdown-text {
            flex: 1;
        }
        
        .breakdown-count {
            font-weight: bold;
        }
        
        /* Answer Review Section */
        .answer-review {
            margin-top: 40px;
        }
        
        .review-title {
            font-size: 22px;
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
        }
        
        .review-item {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .review-question {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--dark);
        }
        
        .review-options {
            margin-bottom: 15px;
        }
        
        .review-option {
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
        }
        
        .review-option.correct {
            background-color: #d4edda;
            border-color: var(--success);
        }
        
        .review-option.incorrect {
            background-color: #f8d7da;
            border-color: var(--danger);
        }
        
        .review-option.user-answer {
            border-left: 4px solid var(--primary);
        }
        
        .review-status {
            font-weight: bold;
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
        }
        
        .status-correct {
            background-color: var(--success);
            color: white;
        }
        
        .status-incorrect {
            background-color: var(--danger);
            color: white;
        }
        
        .status-unattempted {
            background-color: #6c757d;
            color: white;
        }
        
        /* Mobile-first responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .logo h1 {
                font-size: 20px;
            }
            
            .timer {
                font-size: 16px;
                align-self: flex-end;
                margin-top: 5px;
            }
            
            .main-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .question-panel {
                padding: 15px;
                order: 2;
            }
            
            .question-nav {
                order: 1;
                position: static;
            }
            
            .question-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .question-btn {
                height: 35px;
                font-size: 14px;
            }
            
            .question-text {
                font-size: 16px;
            }
            
            .option {
                padding: 12px;
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 14px;
                min-width: 100px;
            }
            
            .navigation-buttons {
                flex-direction: column;
            }
            
            .scorecard {
                padding: 15px;
            }
            
            .scorecard-stats {
                grid-template-columns: 1fr;
            }
            
            .breakdown-grid {
                grid-template-columns: 1fr;
            }
            
            .scorecard-title {
                font-size: 24px;
            }
            
            .stat-value {
                font-size: 28px;
            }
            
            .stat-card {
                padding: 15px;
            }
        }
        
        /* Tablet-specific adjustments */
        @media (min-width: 769px) and (max-width: 1024px) {
            .container {
                padding: 15px;
            }
            
            .question-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .scorecard-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* Landscape optimization */
        @media (max-width: 768px) and (orientation: landscape) {
            body {
                font-size: 14px;
            }
            
            .container {
                padding: 10px;
            }
            
            .main-content {
                flex-direction: row;
                gap: 10px;
            }
            
            .question-panel {
                padding: 15px;
            }
            
            .question-nav {
                padding: 15px;
            }
            
            .question-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 5px;
            }
            
            .question-btn {
                height: 30px;
                font-size: 12px;
            }
            
            .btn {
                padding: 8px 15px;
                font-size: 12px;
            }
            
            .scorecard {
                padding: 15px;
            }
            
            .scorecard-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .stat-card {
                padding: 10px;
            }
            
            .stat-value {
                font-size: 24px;
            }
        }
        
        /* Large screen adjustments */
        @media (min-width: 1200px) {
            .container {
                max-width: 1400px;
            }
        }
        
        /* Small mobile devices */
        @media (max-width: 480px) {
            .question-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .legend {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .question-text {
                font-size: 15px;
            }
            
            .option {
                padding: 10px;
            }
            
            .option label {
                font-size: 14px;
            }
        }
        
        /* Extra small devices */
        @media (max-width: 360px) {
            .question-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .btn {
                min-width: 80px;
                padding: 8px 10px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Landscape orientation message -->
    <div class="orientation-message">
        <i>ðŸ”„</i>
        <h2>Please rotate your device</h2>
        <p>For the best experience, please use landscape mode on mobile devices.</p>
    </div>
    
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <h1>TCS Pattern Mock Test</h1>
                </div>
                <div class="timer" id="timer">Time: 60:00</div>
            </div>
        </header>
        
        <div class="main-content">
            <div class="question-panel">
                <div class="question-number" id="questionNumber">Question 1 of 10</div>
                <div class="question-text" id="questionText">
                    If a train travels at a speed of 72 km/h, how long will it take to cover a distance of 240 km?
                </div>
                
                <div class="options" id="options">
                    <div class="option">
                        <input type="radio" id="option1" name="option">
                        <label for="option1">3 hours</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="option2" name="option">
                        <label for="option2">3.5 hours</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="option3" name="option">
                        <label for="option3">4 hours</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="option4" name="option">
                        <label for="option4">2.5 hours</label>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-secondary" id="prevBtn">Previous</button>
                    <button class="btn btn-primary" id="nextBtn">Next</button>
                    <button class="btn btn-success" id="submitBtn">Submit Test</button>
                </div>
            </div>
            
            <div class="question-nav">
                <div class="section-title">Question Palette</div>
                <div class="question-grid" id="questionGrid">
                    <!-- Question buttons will be generated here -->
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #0047ab;"></div>
                        <span>Current</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #28a745;"></div>
                        <span>Answered</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #e3f2fd;"></div>
                        <span>Visited</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Enhanced Scorecard -->
        <div class="scorecard" id="scorecard">
            <div class="scorecard-header">
                <h2 class="scorecard-title">Test Results</h2>
                <p class="scorecard-subtitle">Detailed performance analysis</p>
            </div>
            
            <div class="scorecard-stats">
                <div class="stat-card">
                    <div class="stat-value correct" id="totalScore">0</div>
                    <div class="stat-label">Total Score</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="accuracyValue">0%</div>
                    <div class="stat-label">Accuracy</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="timeSpent">0:00</div>
                    <div class="stat-label">Time Spent</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="rank">-</div>
                    <div class="stat-label">Estimated Rank</div>
                </div>
            </div>
            
            <div class="accuracy-container">
                <div class="accuracy-title">Accuracy Breakdown</div>
                <div class="accuracy-bar">
                    <div class="accuracy-fill" id="accuracyFill" style="width: 0%"></div>
                </div>
                <div class="accuracy-text" id="accuracyText">0%</div>
            </div>
            
            <div class="scorecard-breakdown">
                <div class="breakdown-title">Question Breakdown</div>
                <div class="breakdown-grid">
                    <div class="breakdown-item">
                        <div class="breakdown-color" style="background-color: #28a745;"></div>
                        <div class="breakdown-text">Correct</div>
                        <div class="breakdown-count correct" id="breakdownCorrect">0</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-color" style="background-color: #dc3545;"></div>
                        <div class="breakdown-text">Incorrect</div>
                        <div class="breakdown-count incorrect" id="breakdownIncorrect">0</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-color" style="background-color: #6c757d;"></div>
                        <div class="breakdown-text">Unattempted</div>
                        <div class="breakdown-count unattempted" id="breakdownUnattempted">0</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-color" style="background-color: #0047ab;"></div>
                        <div class="breakdown-text">Total</div>
                        <div class="breakdown-count" id="breakdownTotal">0</div>
                    </div>
                </div>
            </div>
            
            <!-- Answer Review Section -->
            <div class="answer-review" id="answerReview">
                <h3 class="review-title">Answer Review</h3>
                <!-- Answer review content will be generated here -->
            </div>
            
            <div class="score-actions">
                <button class="btn btn-primary" id="reviewBtn">Back to Test</button>
            </div>
        </div>
    </div>

    <script>
        // Sample questions data
        const questions = [
            {
                id: 1,
                text: "If a train travels at a speed of 72 km/h, how long will it take to cover a distance of 240 km?",
                options: ["3 hours", "3.5 hours", "4 hours", "2.5 hours"],
                correct: 0,
                explanation: "Time = Distance / Speed = 240 km / 72 km/h = 3.33 hours â‰ˆ 3 hours"
            },
            {
                id: 2,
                text: "What is the value of (0.2 Ã— 0.3 + 0.4 Ã— 0.5)?",
                options: ["0.26", "0.36", "0.46", "0.56"],
                correct: 0,
                explanation: "0.2 Ã— 0.3 = 0.06, 0.4 Ã— 0.5 = 0.2, so 0.06 + 0.2 = 0.26"
            },
            {
                id: 3,
                text: "If the ratio of boys to girls in a class is 3:2 and there are 15 boys, how many girls are there?",
                options: ["10", "12", "15", "18"],
                correct: 0,
                explanation: "Boys:Girls = 3:2, so if 3 parts = 15, then 1 part = 5. Girls = 2 parts = 10"
            },
            {
                id: 4,
                text: "A shopkeeper sells an article for $450 and makes a profit of 20%. What was the cost price of the article?",
                options: ["$360", "$375", "$380", "$400"],
                correct: 1,
                explanation: "Selling Price = Cost Price + Profit. 450 = CP + 0.2Ã—CP = 1.2Ã—CP, so CP = 450/1.2 = 375"
            },
            {
                id: 5,
                text: "What is the next number in the series: 2, 6, 12, 20, 30, ?",
                options: ["40", "42", "44", "46"],
                correct: 1,
                explanation: "The pattern is +4, +6, +8, +10, so next is 30 + 12 = 42"
            },
            {
                id: 6,
                text: "If 20% of a number is 50, what is 40% of the same number?",
                options: ["100", "120", "150", "200"],
                correct: 0,
                explanation: "20% of number = 50, so 1% = 50/20 = 2.5, then 40% = 2.5 Ã— 40 = 100"
            },
            {
                id: 7,
                text: "A rectangle has a length of 12 cm and a width of 8 cm. What is its area?",
                options: ["96 cmÂ²", "100 cmÂ²", "104 cmÂ²", "108 cmÂ²"],
                correct: 0,
                explanation: "Area of rectangle = length Ã— width = 12 Ã— 8 = 96 cmÂ²"
            },
            {
                id: 8,
                text: "If x + y = 10 and x - y = 4, what is the value of x?",
                options: ["6", "7", "8", "9"],
                correct: 1,
                explanation: "Adding both equations: 2x = 14, so x = 7"
            },
            {
                id: 9,
                text: "What is the average of the first 10 natural numbers?",
                options: ["5", "5.5", "6", "6.5"],
                correct: 1,
                explanation: "Sum of first 10 natural numbers = 55, average = 55/10 = 5.5"
            },
            {
                id: 10,
                text: "A car travels 180 km in 3 hours. What is its speed in m/s?",
                options: ["15 m/s", "16.67 m/s", "18 m/s", "20 m/s"],
                correct: 1,
                explanation: "Speed = Distance/Time = 180 km / 3 h = 60 km/h = 60 Ã— (1000/3600) m/s = 16.67 m/s"
            }
        ];

        // Initialize variables
        let currentQuestion = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let visitedQuestions = new Array(questions.length).fill(false);
        let timeLeft = 60 * 60; // 60 minutes in seconds
        let timerInterval;
        let startTime;

        // DOM elements
        const questionNumberEl = document.getElementById('questionNumber');
        const questionTextEl = document.getElementById('questionText');
        const optionsEl = document.getElementById('options');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitBtn = document.getElementById('submitBtn');
        const questionGridEl = document.getElementById('questionGrid');
        const timerEl = document.getElementById('timer');
        const scorecardEl = document.getElementById('scorecard');
        const totalScoreEl = document.getElementById('totalScore');
        const accuracyValueEl = document.getElementById('accuracyValue');
        const timeSpentEl = document.getElementById('timeSpent');
        const rankEl = document.getElementById('rank');
        const accuracyFillEl = document.getElementById('accuracyFill');
        const accuracyTextEl = document.getElementById('accuracyText');
        const breakdownCorrectEl = document.getElementById('breakdownCorrect');
        const breakdownIncorrectEl = document.getElementById('breakdownIncorrect');
        const breakdownUnattemptedEl = document.getElementById('breakdownUnattempted');
        const breakdownTotalEl = document.getElementById('breakdownTotal');
        const answerReviewEl = document.getElementById('answerReview');
        const reviewBtn = document.getElementById('reviewBtn');

        // Initialize the test
        function initTest() {
            // Create question grid buttons
            questions.forEach((_, index) => {
                const btn = document.createElement('button');
                btn.className = 'question-btn';
                btn.textContent = index + 1;
                btn.addEventListener('click', () => goToQuestion(index));
                questionGridEl.appendChild(btn);
            });
            
            // Start timer
            startTime = new Date();
            startTimer();
            
            // Load first question
            loadQuestion(currentQuestion);
        }

        // Start the countdown timer
        function startTimer() {
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitTest();
                }
            }, 1000);
        }

        // Update timer display
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerEl.textContent = `Time: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Load a question
        function loadQuestion(index) {
            currentQuestion = index;
            const question = questions[index];
            
            // Update question number and text
            questionNumberEl.textContent = `Question ${index + 1} of ${questions.length}`;
            questionTextEl.textContent = question.text;
            
            // Update options
            optionsEl.innerHTML = '';
            question.options.forEach((option, i) => {
                const optionEl = document.createElement('div');
                optionEl.className = `option ${userAnswers[index] === i ? 'selected' : ''}`;
                
                const input = document.createElement('input');
                input.type = 'radio';
                input.id = `option${i+1}`;
                input.name = 'option';
                input.checked = userAnswers[index] === i;
                input.addEventListener('change', () => selectOption(i));
                
                const label = document.createElement('label');
                label.htmlFor = `option${i+1}`;
                label.textContent = option;
                
                optionEl.appendChild(input);
                optionEl.appendChild(label);
                optionsEl.appendChild(optionEl);
            });
            
            // Update navigation buttons
            prevBtn.disabled = index === 0;
            nextBtn.disabled = index === questions.length - 1;
            
            // Mark question as visited
            visitedQuestions[index] = true;
            updateQuestionGrid();
        }

        // Select an option
        function selectOption(optionIndex) {
            userAnswers[currentQuestion] = optionIndex;
            updateQuestionGrid();
        }

        // Go to a specific question
        function goToQuestion(index) {
            loadQuestion(index);
        }

        // Update question grid display
        function updateQuestionGrid() {
            const questionBtns = questionGridEl.querySelectorAll('.question-btn');
            questionBtns.forEach((btn, index) => {
                btn.className = 'question-btn';
                
                if (index === currentQuestion) {
                    btn.classList.add('current');
                } else if (userAnswers[index] !== null) {
                    btn.classList.add('answered');
                } else if (visitedQuestions[index]) {
                    btn.classList.add('visited');
                }
            });
        }

        // Navigate to next question
        nextBtn.addEventListener('click', () => {
            if (currentQuestion < questions.length - 1) {
                loadQuestion(currentQuestion + 1);
            }
        });

        // Navigate to previous question
        prevBtn.addEventListener('click', () => {
            if (currentQuestion > 0) {
                loadQuestion(currentQuestion - 1);
            }
        });

        // Submit the test
        submitBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to submit the test?')) {
                submitTest();
            }
        });

        // Calculate and display results
        function submitTest() {
            clearInterval(timerInterval);
            
            let correct = 0;
            let incorrect = 0;
            let unattempted = 0;
            
            questions.forEach((question, index) => {
                if (userAnswers[index] === null) {
                    unattempted++;
                } else if (userAnswers[index] === question.correct) {
                    correct++;
                } else {
                    incorrect++;
                }
            });
            
            // Calculate accuracy
            const accuracy = questions.length > 0 ? (correct / questions.length) * 100 : 0;
            
            // Calculate time spent
            const endTime = new Date();
            const timeDiff = (endTime - startTime) / 1000; // in seconds
            const minutesSpent = Math.floor(timeDiff / 60);
            const secondsSpent = Math.floor(timeDiff % 60);
            
            // Calculate score (assuming 4 marks for correct, -1 for incorrect)
            const score = (correct * 4) - (incorrect * 1);
            
            // Estimate rank based on performance
            const rank = estimateRank(accuracy);
            
            // Update scorecard
            totalScoreEl.textContent = score;
            accuracyValueEl.textContent = `${accuracy.toFixed(1)}%`;
            timeSpentEl.textContent = `${minutesSpent}:${secondsSpent.toString().padStart(2, '0')}`;
            rankEl.textContent = rank;
            
            // Update accuracy bar
            accuracyFillEl.style.width = `${accuracy}%`;
            accuracyTextEl.textContent = `${accuracy.toFixed(1)}%`;
            
            // Update breakdown
            breakdownCorrectEl.textContent = correct;
            breakdownIncorrectEl.textContent = incorrect;
            breakdownUnattemptedEl.textContent = unattempted;
            breakdownTotalEl.textContent = questions.length;
            
            // Generate answer review
            generateAnswerReview();
            
            // Hide question panel and show scorecard
            document.querySelector('.main-content').style.display = 'none';
            scorecardEl.style.display = 'block';
        }

        // Estimate rank based on accuracy
        function estimateRank(accuracy) {
            if (accuracy >= 90) return "Top 5%";
            if (accuracy >= 80) return "Top 10%";
            if (accuracy >= 70) return "Top 20%";
            if (accuracy >= 60) return "Top 30%";
            if (accuracy >= 50) return "Top 50%";
            return "Needs Improvement";
        }

        // Generate answer review section
        function generateAnswerReview() {
            answerReviewEl.innerHTML = '<h3 class="review-title">Answer Review</h3>';
            
            questions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.correct;
                const status = userAnswer === null ? 'Unattempted' : (isCorrect ? 'Correct' : 'Incorrect');
                
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                
                // Question text
                const questionText = document.createElement('div');
                questionText.className = 'review-question';
                questionText.textContent = `Q${index + 1}: ${question.text}`;
                reviewItem.appendChild(questionText);
                
                // Options
                const optionsContainer = document.createElement('div');
                optionsContainer.className = 'review-options';
                
                question.options.forEach((option, i) => {
                    const optionEl = document.createElement('div');
                    optionEl.className = 'review-option';
                    
                    if (i === question.correct) {
                        optionEl.classList.add('correct');
                    }
                    
                    if (i === userAnswer) {
                        optionEl.classList.add('user-answer');
                        if (i !== question.correct) {
                            optionEl.classList.add('incorrect');
                        }
                    }
                    
                    optionEl.textContent = option;
                    optionsContainer.appendChild(optionEl);
                });
                
                reviewItem.appendChild(optionsContainer);
                
                // Status and explanation
                const statusEl = document.createElement('div');
                statusEl.className = `review-status status-${status.toLowerCase()}`;
                statusEl.textContent = status;
                reviewItem.appendChild(statusEl);
                
                if (userAnswer !== null && !isCorrect) {
                    const explanationEl = document.createElement('div');
                    explanationEl.style.marginTop = '10px';
                    explanationEl.style.padding = '10px';
                    explanationEl.style.backgroundColor = '#f8f9fa';
                    explanationEl.style.borderRadius = '5px';
                    explanationEl.innerHTML = `<strong>Explanation:</strong> ${question.explanation}`;
                    reviewItem.appendChild(explanationEl);
                }
                
                answerReviewEl.appendChild(reviewItem);
            });
        }

        // Back to test review
        reviewBtn.addEventListener('click', () => {
            scorecardEl.style.display = 'none';
            document.querySelector('.main-content').style.display = 'flex';
        });

        // Initialize the test when the page loads
        window.addEventListener('DOMContentLoaded', initTest);
    </script>
</body>
</html>            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .question-btn:hover {
            background-color: #f0f0f0;
        }
        
        .question-btn.visited {
            background-color: #e3f2fd;
            border-color: var(--primary);
        }
        
        .question-btn.answered {
            background-color: var(--success);
            color: white;
            border-color: var(--success);
        }
        
        .question-btn.current {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .section-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary);
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 5px;
        }
        
        .legend {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            font-size: 12px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
            margin-right: 5px;
        }
        
        /* Enhanced Scorecard Styles */
        .scorecard {
            display: none;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-top: 30px;
        }
        
        .scorecard-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .scorecard-title {
            font-size: 28px;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .scorecard-subtitle {
            color: #6c757d;
            font-size: 16px;
        }
        
        .scorecard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            border-left: 4px solid var(--primary);
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 14px;
        }
        
        .accuracy-container {
            margin: 30px 0;
        }
        
        .accuracy-title {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .accuracy-bar {
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .accuracy-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), #20c997);
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .accuracy-text {
            text-align: right;
            font-weight: bold;
            color: var(--primary);
        }
        
        .scorecard-breakdown {
            margin-top: 30px;
        }
        
        .breakdown-title {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .breakdown-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .breakdown-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-radius: 6px;
            background: #f8f9fa;
        }
        
        .breakdown-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .breakdown-text {
            flex: 1;
        }
        
        .breakdown-count {
            font-weight: bold;
        }
        
        /* Answer Review Section */
        .answer-review {
            margin-top: 40px;
        }
        
        .review-title {
            font-size: 22px;
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
        }
        
        .review-item {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .review-question {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--dark);
        }
        
        .review-options {
            margin-bottom: 15px;
        }
        
        .review-option {
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
        }
        
        .review-option.correct {
            background-color: #d4edda;
            border-color: var(--success);
        }
        
        .review-option.incorrect {
            background-color: #f8d7da;
            border-color: var(--danger);
        }
        
        .review-option.user-answer {
            border-left: 4px solid var(--primary);
        }
        
        .review-status {
            font-weight: bold;
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
        }
        
        .status-correct {
            background-color: var(--success);
            color: white;
        }
        
        .status-incorrect {
            background-color: var(--danger);
            color: white;
        }
        
        .status-unattempted {
            background-color: #6c757d;
            color: white;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .question-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .scorecard-stats {
                grid-template-columns: 1fr;
            }
            
            .breakdown-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Landscape optimization */
        @media (max-width: 768px) and (orientation: landscape) {
            body {
                font-size: 14px;
            }
            
            .container {
                padding: 10px;
            }
            
            .main-content {
                flex-direction: row;
                gap: 10px;
            }
            
            .question-panel {
                padding: 15px;
            }
            
            .question-nav {
                padding: 15px;
            }
            
            .question-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 5px;
            }
            
            .question-btn {
                height: 30px;
                font-size: 12px;
            }
            
            .btn {
                padding: 8px 15px;
                font-size: 12px;
            }
            
            .scorecard {
                padding: 15px;
            }
            
            .scorecard-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .stat-card {
                padding: 10px;
            }
            
            .stat-value {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Landscape orientation message -->
    <div class="orientation-message">
        <i>ðŸ”„</i>
        <h2>Please rotate your device</h2>
        <p>For the best experience, please use landscape mode on mobile devices.</p>
    </div>
    
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <h1>TCS Pattern Mock Test</h1>
                </div>
                <div class="timer" id="timer">Time: 60:00</div>
            </div>
        </header>
        
        <div class="main-content">
            <div class="question-panel">
                <div class="question-number" id="questionNumber">Question 1 of 10</div>
                <div class="question-text" id="questionText">
                    If a train travels at a speed of 72 km/h, how long will it take to cover a distance of 240 km?
                </div>
                
                <div class="options" id="options">
                    <div class="option">
                        <input type="radio" id="option1" name="option">
                        <label for="option1">3 hours</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="option2" name="option">
                        <label for="option2">3.5 hours</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="option3" name="option">
                        <label for="option3">4 hours</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="option4" name="option">
                        <label for="option4">2.5 hours</label>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-secondary" id="prevBtn">Previous</button>
                    <button class="btn btn-primary" id="nextBtn">Next</button>
                    <button class="btn btn-success" id="submitBtn">Submit Test</button>
                </div>
            </div>
            
            <div class="question-nav">
                <div class="section-title">Question Palette</div>
                <div class="question-grid" id="questionGrid">
                    <!-- Question buttons will be generated here -->
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #0047ab;"></div>
                        <span>Current</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #28a745;"></div>
                        <span>Answered</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #e3f2fd;"></div>
                        <span>Visited</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Enhanced Scorecard -->
        <div class="scorecard" id="scorecard">
            <div class="scorecard-header">
                <h2 class="scorecard-title">Test Results</h2>
                <p class="scorecard-subtitle">Detailed performance analysis</p>
            </div>
            
            <div class="scorecard-stats">
                <div class="stat-card">
                    <div class="stat-value correct" id="totalScore">0</div>
                    <div class="stat-label">Total Score</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="accuracyValue">0%</div>
                    <div class="stat-label">Accuracy</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="timeSpent">0:00</div>
                    <div class="stat-label">Time Spent</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="rank">-</div>
                    <div class="stat-label">Estimated Rank</div>
                </div>
            </div>
            
            <div class="accuracy-container">
                <div class="accuracy-title">Accuracy Breakdown</div>
                <div class="accuracy-bar">
                    <div class="accuracy-fill" id="accuracyFill" style="width: 0%"></div>
                </div>
                <div class="accuracy-text" id="accuracyText">0%</div>
            </div>
            
            <div class="scorecard-breakdown">
                <div class="breakdown-title">Question Breakdown</div>
                <div class="breakdown-grid">
                    <div class="breakdown-item">
                        <div class="breakdown-color" style="background-color: #28a745;"></div>
                        <div class="breakdown-text">Correct</div>
                        <div class="breakdown-count correct" id="breakdownCorrect">0</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-color" style="background-color: #dc3545;"></div>
                        <div class="breakdown-text">Incorrect</div>
                        <div class="breakdown-count incorrect" id="breakdownIncorrect">0</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-color" style="background-color: #6c757d;"></div>
                        <div class="breakdown-text">Unattempted</div>
                        <div class="breakdown-count unattempted" id="breakdownUnattempted">0</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-color" style="background-color: #0047ab;"></div>
                        <div class="breakdown-text">Total</div>
                        <div class="breakdown-count" id="breakdownTotal">0</div>
                    </div>
                </div>
            </div>
            
            <!-- Answer Review Section -->
            <div class="answer-review" id="answerReview">
                <h3 class="review-title">Answer Review</h3>
                <!-- Answer review content will be generated here -->
            </div>
            
            <div class="score-actions">
                <button class="btn btn-primary" id="reviewBtn">Back to Test</button>
            </div>
        </div>
    </div>

    <script>
        // Sample questions data
        const questions = [
            {
                id: 1,
                text: "If a train travels at a speed of 72 km/h, how long will it take to cover a distance of 240 km?",
                options: ["3 hours", "3.5 hours", "4 hours", "2.5 hours"],
                correct: 0,
                explanation: "Time = Distance / Speed = 240 km / 72 km/h = 3.33 hours â‰ˆ 3 hours"
            },
            {
                id: 2,
                text: "What is the value of (0.2 Ã— 0.3 + 0.4 Ã— 0.5)?",
                options: ["0.26", "0.36", "0.46", "0.56"],
                correct: 0,
                explanation: "0.2 Ã— 0.3 = 0.06, 0.4 Ã— 0.5 = 0.2, so 0.06 + 0.2 = 0.26"
            },
            {
                id: 3,
                text: "If the ratio of boys to girls in a class is 3:2 and there are 15 boys, how many girls are there?",
                options: ["10", "12", "15", "18"],
                correct: 0,
                explanation: "Boys:Girls = 3:2, so if 3 parts = 15, then 1 part = 5. Girls = 2 parts = 10"
            },
            {
                id: 4,
                text: "A shopkeeper sells an article for $450 and makes a profit of 20%. What was the cost price of the article?",
                options: ["$360", "$375", "$380", "$400"],
                correct: 1,
                explanation: "Selling Price = Cost Price + Profit. 450 = CP + 0.2Ã—CP = 1.2Ã—CP, so CP = 450/1.2 = 375"
            },
            {
                id: 5,
                text: "What is the next number in the series: 2, 6, 12, 20, 30, ?",
                options: ["40", "42", "44", "46"],
                correct: 1,
                explanation: "The pattern is +4, +6, +8, +10, so next is 30 + 12 = 42"
            },
            {
                id: 6,
                text: "If 20% of a number is 50, what is 40% of the same number?",
                options: ["100", "120", "150", "200"],
                correct: 0,
                explanation: "20% of number = 50, so 1% = 50/20 = 2.5, then 40% = 2.5 Ã— 40 = 100"
            },
            {
                id: 7,
                text: "A rectangle has a length of 12 cm and a width of 8 cm. What is its area?",
                options: ["96 cmÂ²", "100 cmÂ²", "104 cmÂ²", "108 cmÂ²"],
                correct: 0,
                explanation: "Area of rectangle = length Ã— width = 12 Ã— 8 = 96 cmÂ²"
            },
            {
                id: 8,
                text: "If x + y = 10 and x - y = 4, what is the value of x?",
                options: ["6", "7", "8", "9"],
                correct: 1,
                explanation: "Adding both equations: 2x = 14, so x = 7"
            },
            {
                id: 9,
                text: "What is the average of the first 10 natural numbers?",
                options: ["5", "5.5", "6", "6.5"],
                correct: 1,
                explanation: "Sum of first 10 natural numbers = 55, average = 55/10 = 5.5"
            },
            {
                id: 10,
                text: "A car travels 180 km in 3 hours. What is its speed in m/s?",
                options: ["15 m/s", "16.67 m/s", "18 m/s", "20 m/s"],
                correct: 1,
                explanation: "Speed = Distance/Time = 180 km / 3 h = 60 km/h = 60 Ã— (1000/3600) m/s = 16.67 m/s"
            }
        ];

        // Initialize variables
        let currentQuestion = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let visitedQuestions = new Array(questions.length).fill(false);
        let timeLeft = 60 * 60; // 60 minutes in seconds
        let timerInterval;
        let startTime;

        // DOM elements
        const questionNumberEl = document.getElementById('questionNumber');
        const questionTextEl = document.getElementById('questionText');
        const optionsEl = document.getElementById('options');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitBtn = document.getElementById('submitBtn');
        const questionGridEl = document.getElementById('questionGrid');
        const timerEl = document.getElementById('timer');
        const scorecardEl = document.getElementById('scorecard');
        const totalScoreEl = document.getElementById('totalScore');
        const accuracyValueEl = document.getElementById('accuracyValue');
        const timeSpentEl = document.getElementById('timeSpent');
        const rankEl = document.getElementById('rank');
        const accuracyFillEl = document.getElementById('accuracyFill');
        const accuracyTextEl = document.getElementById('accuracyText');
        const breakdownCorrectEl = document.getElementById('breakdownCorrect');
        const breakdownIncorrectEl = document.getElementById('breakdownIncorrect');
        const breakdownUnattemptedEl = document.getElementById('breakdownUnattempted');
        const breakdownTotalEl = document.getElementById('breakdownTotal');
        const answerReviewEl = document.getElementById('answerReview');
        const reviewBtn = document.getElementById('reviewBtn');

        // Initialize the test
        function initTest() {
            // Create question grid buttons
            questions.forEach((_, index) => {
                const btn = document.createElement('button');
                btn.className = 'question-btn';
                btn.textContent = index + 1;
                btn.addEventListener('click', () => goToQuestion(index));
                questionGridEl.appendChild(btn);
            });
            
            // Start timer
            startTime = new Date();
            startTimer();
            
            // Load first question
            loadQuestion(currentQuestion);
        }

        // Start the countdown timer
        function startTimer() {
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitTest();
                }
            }, 1000);
        }

        // Update timer display
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerEl.textContent = `Time: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Load a question
        function loadQuestion(index) {
            currentQuestion = index;
            const question = questions[index];
            
            // Update question number and text
            questionNumberEl.textContent = `Question ${index + 1} of ${questions.length}`;
            questionTextEl.textContent = question.text;
            
            // Update options
            optionsEl.innerHTML = '';
            question.options.forEach((option, i) => {
                const optionEl = document.createElement('div');
                optionEl.className = `option ${userAnswers[index] === i ? 'selected' : ''}`;
                
                const input = document.createElement('input');
                input.type = 'radio';
                input.id = `option${i+1}`;
                input.name = 'option';
                input.checked = userAnswers[index] === i;
                input.addEventListener('change', () => selectOption(i));
                
                const label = document.createElement('label');
                label.htmlFor = `option${i+1}`;
                label.textContent = option;
                
                optionEl.appendChild(input);
                optionEl.appendChild(label);
                optionsEl.appendChild(optionEl);
            });
            
            // Update navigation buttons
            prevBtn.disabled = index === 0;
            nextBtn.disabled = index === questions.length - 1;
            
            // Mark question as visited
            visitedQuestions[index] = true;
            updateQuestionGrid();
        }

        // Select an option
        function selectOption(optionIndex) {
            userAnswers[currentQuestion] = optionIndex;
            updateQuestionGrid();
        }

        // Go to a specific question
        function goToQuestion(index) {
            loadQuestion(index);
        }

        // Update question grid display
        function updateQuestionGrid() {
            const questionBtns = questionGridEl.querySelectorAll('.question-btn');
            questionBtns.forEach((btn, index) => {
                btn.className = 'question-btn';
                
                if (index === currentQuestion) {
                    btn.classList.add('current');
                } else if (userAnswers[index] !== null) {
                    btn.classList.add('answered');
                } else if (visitedQuestions[index]) {
                    btn.classList.add('visited');
                }
            });
        }

        // Navigate to next question
        nextBtn.addEventListener('click', () => {
            if (currentQuestion < questions.length - 1) {
                loadQuestion(currentQuestion + 1);
            }
        });

        // Navigate to previous question
        prevBtn.addEventListener('click', () => {
            if (currentQuestion > 0) {
                loadQuestion(currentQuestion - 1);
            }
        });

        // Submit the test
        submitBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to submit the test?')) {
                submitTest();
            }
        });

        // Calculate and display results
        function submitTest() {
            clearInterval(timerInterval);
            
            let correct = 0;
            let incorrect = 0;
            let unattempted = 0;
            
            questions.forEach((question, index) => {
                if (userAnswers[index] === null) {
                    unattempted++;
                } else if (userAnswers[index] === question.correct) {
                    correct++;
                } else {
                    incorrect++;
                }
            });
            
            // Calculate accuracy
            const accuracy = questions.length > 0 ? (correct / questions.length) * 100 : 0;
            
            // Calculate time spent
            const endTime = new Date();
            const timeDiff = (endTime - startTime) / 1000; // in seconds
            const minutesSpent = Math.floor(timeDiff / 60);
            const secondsSpent = Math.floor(timeDiff % 60);
            
            // Calculate score (assuming 4 marks for correct, -1 for incorrect)
            const score = (correct * 4) - (incorrect * 1);
            
            // Estimate rank based on performance
            const rank = estimateRank(accuracy);
            
            // Update scorecard
            totalScoreEl.textContent = score;
            accuracyValueEl.textContent = `${accuracy.toFixed(1)}%`;
            timeSpentEl.textContent = `${minutesSpent}:${secondsSpent.toString().padStart(2, '0')}`;
            rankEl.textContent = rank;
            
            // Update accuracy bar
            accuracyFillEl.style.width = `${accuracy}%`;
            accuracyTextEl.textContent = `${accuracy.toFixed(1)}%`;
            
            // Update breakdown
            breakdownCorrectEl.textContent = correct;
            breakdownIncorrectEl.textContent = incorrect;
            breakdownUnattemptedEl.textContent = unattempted;
            breakdownTotalEl.textContent = questions.length;
            
            // Generate answer review
            generateAnswerReview();
            
            // Hide question panel and show scorecard
            document.querySelector('.main-content').style.display = 'none';
            scorecardEl.style.display = 'block';
        }

        // Estimate rank based on accuracy
        function estimateRank(accuracy) {
            if (accuracy >= 90) return "Top 5%";
            if (accuracy >= 80) return "Top 10%";
            if (accuracy >= 70) return "Top 20%";
            if (accuracy >= 60) return "Top 30%";
            if (accuracy >= 50) return "Top 50%";
            return "Needs Improvement";
        }

        // Generate answer review section
        function generateAnswerReview() {
            answerReviewEl.innerHTML = '<h3 class="review-title">Answer Review</h3>';
            
            questions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.correct;
                const status = userAnswer === null ? 'Unattempted' : (isCorrect ? 'Correct' : 'Incorrect');
                
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                
                // Question text
                const questionText = document.createElement('div');
                questionText.className = 'review-question';
                questionText.textContent = `Q${index + 1}: ${question.text}`;
                reviewItem.appendChild(questionText);
                
                // Options
                const optionsContainer = document.createElement('div');
                optionsContainer.className = 'review-options';
                
                question.options.forEach((option, i) => {
                    const optionEl = document.createElement('div');
                    optionEl.className = 'review-option';
                    
                    // Highlight correct answer
                    if (i === question.correct) {
                        optionEl.classList.add('correct');
                    }
                    
                    // Highlight user's answer if different from correct
                    if (userAnswer === i && userAnswer !== question.correct) {
                        optionEl.classList.add('incorrect', 'user-answer');
                    } else if (userAnswer === i) {
                        optionEl.classList.add('user-answer');
                    }
                    
                    optionEl.textContent = option;
                    optionsContainer.appendChild(optionEl);
                });
                
                reviewItem.appendChild(optionsContainer);
                
                // Status and explanation
                const statusEl = document.createElement('div');
                statusEl.className = `review-status status-${status.toLowerCase()}`;
                statusEl.textContent = status;
                reviewItem.appendChild(statusEl);
                
                // Explanation for correct answer
                if (question.explanation) {
                    const explanationEl = document.createElement('div');
                    explanationEl.style.marginTop = '10px';
                    explanationEl.style.padding = '10px';
                    explanationEl.style.backgroundColor = '#f8f9fa';
                    explanationEl.style.borderRadius = '5px';
                    explanationEl.innerHTML = `<strong>Explanation:</strong> ${question.explanation}`;
                    reviewItem.appendChild(explanationEl);
                }
                
                answerReviewEl.appendChild(reviewItem);
            });
        }

        // Review answers
        reviewBtn.addEventListener('click', () => {
            scorecardEl.style.display = 'none';
            document.querySelector('.main-content').style.display = 'flex';
        });

        // Initialize the test when page loads
        window.addEventListener('DOMContentLoaded', initTest);
    </script>
</body>
</html>
